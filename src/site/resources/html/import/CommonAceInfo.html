<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <link type="text/css" rel="stylesheet" href="./Doc.css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Common Ace WorkBench Import Structures and Notes</title>

</head>
<body>
<div class="divCenter"><span class="docTitle">Common Ace WorkBench Import Structures and Notes</span></div>
<h1><a name="Table_of_Contents" /><span class="docSubTitle">Table
of Contents:</span></h1>

<ul class="docSubSubTitle">
	<li><a href="#Summary">Summary</a></li>
	<li><a href="#glossary">Glossary</a></li>
	<li><a href="#ccn">Common Coding Notes</a>
	<ul>
	<li><a href="#addTab">Remember to add the tab</a></li>
	<li><a href="#pathUUID">PathUUID</a></li>
	<li><a href="#EffDate">Effective Date</a></li>
	<li><a href="#GenUUIDAsString">Generating a String UUID</a></li>
	<li><a href="#GenUUID">Generating a UUID to denote a specific concept, description, relationship or path</a></li>
	<li><a href="#FindConcepts">What and where are concepts?</a></li>
	<li><a href="#GetConceptUUID">Getting a Concept UUID</a></li>
	<li><a href="#StatusUUID">Getting a Status UUID</a></li>			
	</ul>
	</li>
</ul>

<h2><a class="docSubTitle" href="#Table_of_Contents" name="Summary">Summary</a></h2>
<p>This is where all the common information about the Ace Workbench Import Structures and Coding is held <br/>
For information concerning the Import files see:
<ol>
<li><a href="./ImportStructures.html" target="NormalImport" class="docBoldBlue">Normal Import Files</a></li>
<li><a href="./refset.html" target="refsets" class="docBoldBlue">RefSet Files</a></li>
</ol>

</p>

<h2><a class="docSubTitle" href="#Table_of_Contents" name="glossary">Glossary</a></h2>
<table class="OutlineTable" border="0" cellpadding="2"
	cellspacing="2">
	<colgroup>
		<col class="cg-15"/>
		<col class="cg-10"/>
		<col class="cg-100"/>
	</colgroup>
	<tbody>
		<tr>
			<th>Term</th>
			<th>Type</th>
			<th>Notes</th>
		</tr>
		<tr>
			<td><a name="UUID" class="docBoldBlue">Universally Unique Identifier (UUID)</a></td>
			<td>UUID</td>
			<td>
				The UUID is represented in its canonical form, consisting of 32
				hexadecimal digits, displayed in 5 groups separated by hyphens, for
				a total of 36 characters.<br/>
				<br/> For example: 550e8400-e29b-41d4-a716-446655440000 <br/><br/>
				</td>
		</tr>
		<tr>
			<td><a name="Date" class="docBoldBlue">Date</a></td>
			<td>Date</td>
			<td>The value is represented by a string
				of one of the following formats:
				<ol>
					<li>yyyy-MM-dd HH:mm:ss</li>
					<li>yyyyMMdd HH:mm:ss</li>
				</ol>
			</td>
		</tr>
	</tbody>
</table>

<h2><a class="docSubTitle" href="#Table_of_Contents" name="ccn">Common Coding Notes</a></h2>
<p><span class="docSubSubTitle">This is where coding task description which are used in more than one place go so as to avoid copy and paste in the main text file table descriptions.</span> <br />
</p>
<table class="OutlineTable" border="0" cellpadding="2"
	cellspacing="2">
	<colgroup>
		<col class="cg-15"/>
		<col class="cg-100"/>
	</colgroup>
	<tbody>
		<tr>
			<th>Name</th>
			<th>Notes</th>
		</tr>
		<tr>
			<td><a name="addTab" class="docBoldBlue">Remember to add the tab</a></td>
			<td>The import files are tab separated text files. As such whenever you append a value remember to add
			<pre>.append("\t");</pre> as the next line e.g. adding an <a href="#EffDate">Effective Date</a> to concepts might be  :
			<pre>concepts.append(effectiveDate);</pre> but the full statement is actually:
			<pre>concepts.append(effectiveDate);
concepts.append("\t");</pre>
			<span class="docRed">i.e. whenever you append a value append a tab</span>
			</td>
		</tr>		
		<tr>
			<td><a name="pathUUID" class="docBoldBlue">PathUUID</a></td>
			<td>The Path UUID is usually generated by setting the pathFsDesc String from the Maven Build pom.xml file:
			<pre>
				&lt;configuration&gt;
					&lt;pathFsDesc&gt;READV3 path&lt;/pathFsDesc&gt;
					&lt;effectiveDate&gt;20050928 00:00:00&lt;/effectiveDate&gt;
				 &lt;/configuration&gt;</pre>
			And then <a href="GenUUID">generated</a> using
			<pre>UUID pathUUID = Type5UuidFactory.get(Type5UuidFactory.PATH_ID_FROM_FS_DESC, pathFsDesc);</pre>
			</td>
		</tr>
		<tr>
			<td><a name="EffDate"class="docBoldBlue" >Effective Date</a></td>
			<td>The Effective Date is usually generated by setting the effectiveDate String from the Maven Build pom.xml file:
			<pre>
				&lt;configuration&gt;
					&lt;pathFsDesc&gt;READV3 path&lt;/pathFsDesc&gt;
					&lt;effectiveDate&gt;20050928 00:00:00&lt;/effectiveDate&gt;
				 &lt;/configuration&gt;</pre>
			It is then appended directly into the file (using concepts.txt as an example) using:
			<pre>
			concepts.append(effectiveDate);</pre>
			</td>
		</tr>
		<tr>
			<td><a name="GenUUIDAsString" class="docBoldBlue">Generating a String UUID</a></td>
			<td>A quick way to get a UUID is to go to <a href="http://www.famkruithof.net/uuid/uuidgen" target="_blank">http://www.famkruithof.net/uuid/uuidgen</a></td>
		</tr>
		<tr>
			<td><a name="GenUUID" class="docBoldBlue">Generating a UUID to denote a specific concept, description, relationship or path</a></td>
			<td> <ol>
			<li>First you either need to use an existing UUID e.g.
			<pre>
			Type5UuidFactory.PATH_ID_FROM_FS_DESC
			</pre>
			or <a href="GenUUIDAsString">Generate one as a String</a>
			and then add it to a Java file e.g. 
			<pre>
			package net.nhs.cfh.terms.read;
			import java.util.UUID;
			public class ReadStatics {	
	   			public static UUID READV3_CONCEPT_ID = UUID.fromString("45419916-8ecd-11dc-8314-0800200c9a66");
	   		}
			</pre>
			</li>
			<li>Then you need to supply it and a String (for instance an exisiting id from the terminology you are importing)
			to the <br/>
			<span class="docRed">org.dwfa.util.id.Type5UuidFactory.get(UUID namespace, String name)</span> method which returns a UUID <br/>e.g.
			<pre>UUID conceptUuid = Type5UuidFactory.get(ReadStatics.READV3_CONCEPT_ID,conceptparts[readcodeIndex]);
concepts.append(conceptUuid());</pre>
			Or in one line:
			<pre>concepts.append(Type5UuidFactory.get(ReadStatics.READV3_CONCEPT_ID,conceptparts[readcodeIndex]).toString());</pre>
			</li>
			</ol>
			
			</td>
		</tr>
		<tr>
			<td><a name="FindConcepts" class="docBoldBlue">What and where are concepts?</a></td>
			<td><ul><li><span class="docBoldBlue">What:</span><br/>A Concept should implement <span class="docRed">org.dwfa.tapi.I_ConceptualizeUniversally</span> interface</li>
			<li><span class="docBoldBlue">Where:</span><br/>The Main repository for the concepts is the <span class="docRed">Concept enum</span> within the 
			<span class="docRed">org.dwfa.cement.ArchitectonicAuxiliary</span><br/> class. which implements <span class="docRed">I_ConceptualizeUniversally</span> </li>
			</ul>
			</td>
		</tr>		
		<tr>
			<td><a name="GetConceptUUID" class="docBoldBlue">Getting a Concept UUID</a></td>
			<td>You can get a concept (usually contained in <a href="#FindConcepts" class="docRed">ArchitectonicAuxiliary</a>) and
			then ask it for it's UUID.<br/> For example using the CURRENT status concept as an example:
			<pre>
			ArchitectonicAuxiliary.Concept.CURRENT.getUids().iterator().next();
			//or as String:
			ArchitectonicAuxiliary.Concept.CURRENT.getUids().iterator().next().toString();
			</pre>
			</td>
		</tr>
		<tr>
			<td><a name="StatusUUID" class="docBoldBlue">Getting a Status UUID</a></td>
			<td><ul> <li>Often the terminology you are looking to import will carry status flags for a given record.</li>
			<li>To get the relevant status UUID you will need to <a href="GetConceptUUID">get the Concept UUID</a> of one of the Status concepts.</li>
			<li>These are to be found in <a href="#FindConcepts" class="docRed"> ArchitectonicAuxiliary</a>.<br/> 
			Basically do a text search in that class for:<br/>
			<span class="docRed">STATUS("status (status type)"</span>. You should see concepts such as: ACTIVE,PENDING_MOVE,CURRENT etc. </li>
			<li>When importing you may need an if-then-else-elseif statement for example:
			<pre>
			if (conceptparts[conceptStatusIndex].equals("O")) {
        		concepts.append(ArchitectonicAuxiliary.Concept.OPTIONAL.getUids().iterator().next().toString());
        		} else if (conceptparts[conceptStatusIndex].equals("C")) {
        		concepts.append(ArchitectonicAuxiliary.Concept.CURRENT.getUids().iterator().next().toString());
        		}
        		....
			</pre>
			</li>
			</ul>
			</td>
		</tr>
			
	</tbody>
</table>

</body>
</html>