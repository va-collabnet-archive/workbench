<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
         xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:ns="http://maven.apache.org/POM/4.0.0">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <artifactId>wb-mmb</artifactId>

    <groupId>org.ihtsdo</groupId>

    <version>2.5.1-trek-inf-1-SNAPSHOT</version>
  </parent>

  <artifactId>wb-docs</artifactId>
  <name>Generate documentation from DITA sources</name>

  <description>Take a set of DITA files and transform them to various output formats using the
    DITA Open Toolkit. The output format produced is controlled by maven profiles - see the end
    of the pom.xml file. </description>

  <packaging>pom</packaging>

  <scm>
    <connection>scm:svn:http://svn.codehaus.org/mojo/trunk/mojo/dita-maven-plugin/src/it/dita-to-pdf</connection>

    <developerConnection>scm:svn:https://svn.codehaus.org/mojo/trunk/mojo/dita-maven-plugin/src/it/dita-to-pdf</developerConnection>

    <url>http://svn.codehaus.org/mojo/trunk/mojo/dita-maven-plugin/src/it/dita-to-pdf</url>
  </scm>

  <properties>
    <oxygen-basedir>/Applications/eclipse/plugins/com.oxygenxml.editor_10.3.0</oxygen-basedir>

    <dita-ot-basedir>/Users/ericbrowne/software/DITA/DITA-OT1.5.1</dita-ot-basedir>

    <guidebook-dita-basedir>${basedir}/src/main/dita</guidebook-dita-basedir>

    <xep-dir>/Users/ericbrowne/software/XEP</xep-dir>

    <book-dir>Guidebook</book-dir>

    <output-dir>"pdf"</output-dir>

    <pdf-formatter>"xep"</pdf-formatter>

    <ditamap-filename>Workbench_GuideBook.ditamap</ditamap-filename>

    <out-dir-full>${doc-target-dir}/${output-dir}</out-dir-full>

    <customization.dir>${basedir}/src/main/fo/cfg</customization.dir>
  </properties>

  <dependencies>
    <dependency>
      <groupId>net.sourceforge.saxon</groupId>

      <artifactId>saxon</artifactId>

      <version>9.1.0.8</version>

      <optional>true</optional>
    </dependency>

    <dependency>
      <groupId>net.sourceforge.saxon</groupId>

      <artifactId>saxon</artifactId>

      <classifier>dom</classifier>

      <version>9.1.0.8</version>

      <optional>true</optional>
    </dependency>

    <dependency>
      <groupId>com.ibm.icu</groupId>

      <artifactId>icu4j</artifactId>

      <version>3.4.4</version>

      <optional>true</optional>
    </dependency>

    <dependency>
      <groupId>org.apache.xmlgraphics</groupId>

      <artifactId>fop</artifactId>

      <version>0.95-1</version>

      <optional>true</optional>
    </dependency>

    <!-- note: fop.jar must always after saxon -->
  </dependencies>

  <build>
    <plugins>
      <!--  load ${timestamp} -->

      <plugin>
        <groupId>org.codehaus.mojo</groupId>

        <artifactId>buildnumber-maven-plugin</artifactId>

        <version>1.0-beta-2</version>

        <executions>
          <execution>
            <phase>validate</phase>

            <goals>
              <goal>create</goal>
            </goals>

            <configuration>
              <timestampFormat>{0,date,MMMMM dd yyyy}</timestampFormat>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <!-- put build properties into an xsl file to be consumed by custom.xsl -->

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>

        <artifactId>maven-resources-plugin</artifactId>

        <version>2.4.1</version>

        <executions>
          <execution>
            <id>make-doc-date</id>

            <phase>generate-sources</phase>

            <goals>
              <goal>copy-resources</goal>
            </goals>

            <configuration>
              <resources>
                <resource>
                  <directory>src/main/resources</directory>

                  <filtering>true</filtering>
                </resource>
              </resources>

              <outputDirectory>${project.build.directory}/dita/resources</outputDirectory>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.codehaus.mojo</groupId>

        <artifactId>dita-maven-plugin</artifactId>

        <version>1.0-beta-2</version>

        <executions>
          <execution>
            <id>dita2pdf</id>

            <phase>package</phase>

            <goals>
              <goal>run</goal>
            </goals>

            <configuration>
              <useDitaAnt>false</useDitaAnt>

              <antArguments />

              <antProperties>
                <transtype>pdf2</transtype>

                <dita.dir>/Users/ericbrowne/software/DITA/DITA-OT1.5.1</dita.dir>

                <args.input>/Users/ericbrowne/montage/clients/InformaticsInc/ACE/SVN_synch/wb-mmb_trek_info/wb-docs/src/main/dita/Guidebook/Workbench_Guidebook.ditamap</args.input>

                <dita.extname>dita</dita.extname>

                <xep.dir>${xep-dir}</xep.dir>

                <!--                <output.dir>{project.build.directory}/${output-dir} </output.dir>
-->

                <output-dir>pdf</output-dir>

                <!--                <pdf.formatter>{pdf-formatter}</pdf.formatter>
-->

                <pdf.formatter>xep</pdf.formatter>

                <!--                <customization.dir>${customization.dir}</customization.dir>
                <clean.temp>yes</clean.temp>
-->
              </antProperties>

              <antOpts>-Xmx1600m -Xms1100</antOpts>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project>
